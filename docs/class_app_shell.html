<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MakerLabs ACM: AppShell Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script>
<script>
  mermaid.initialize({
    startOnLoad: true,
    flowchart:{
      useMaxWidth: true,
      htmlLabels: true,
    },
  });
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MakerLabs ACM
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_app_shell.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_app_shell-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AppShell Class Reference<div class="ingroups"><a class="el" href="group__webcomponents.html">webcomponents/</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Top-level WebComponent which has auth sidebar, search box, and form.  
 <a href="class_app_shell.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for AppShell:</div>
<div class="dyncontent">
<div class="center"><img src="class_app_shell__inherit__graph.png" border="0" usemap="#_app_shell_inherit__map" alt="Inheritance graph"/></div>
<map name="_app_shell_inherit__map" id="_app_shell_inherit__map">
<area shape="rect"  title="Top&#45;level WebComponent which has auth sidebar, search box, and form." alt="" coords="10,79,85,104"/>
<area shape="rect"  title=" " alt="" coords="5,5,90,31"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Top-level WebComponent which has auth sidebar, search box, and form. </p>
<p>Properties on this component are used to specify configuration values such as for Google Spreadsheet / Google Drive settings, as well as endpoint URLs.</p>
<p>Field descriptions are loaded dynamically via a Google Apps Script handler which lists the Google Spreadsheet <code>Users</code> sheet columns and validations, and returns a JSON description of metadata for all fields. The <code>fields</code> metadata is provided to the <code>&lt;view-user-form&gt;</code> as an input property. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a97a545a8b86e18e025d2553fb5242748"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a97a545a8b86e18e025d2553fb5242748">constructor</a> ()</td></tr>
<tr class="separator:a97a545a8b86e18e025d2553fb5242748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb2a7738c4fc7e96651e4757c90d339"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a6bb2a7738c4fc7e96651e4757c90d339">render</a> ()</td></tr>
<tr class="memdesc:a6bb2a7738c4fc7e96651e4757c90d339"><td class="mdescLeft">&#160;</td><td class="mdescRight">LitElement lifecycle hook. Re-rendered after any update().  <a href="#a6bb2a7738c4fc7e96651e4757c90d339">More...</a><br /></td></tr>
<tr class="separator:a6bb2a7738c4fc7e96651e4757c90d339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4097378f6f2e7569c9c5a8cd7f72b30"><td class="memItemLeft" align="right" valign="top">async&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#ad4097378f6f2e7569c9c5a8cd7f72b30">updated</a> (changedProperties)</td></tr>
<tr class="memdesc:ad4097378f6f2e7569c9c5a8cd7f72b30"><td class="mdescLeft">&#160;</td><td class="mdescRight">LitElement lifecycle hook. Called whenever the element's DOM has been updated and rendered.  <a href="#ad4097378f6f2e7569c9c5a8cd7f72b30">More...</a><br /></td></tr>
<tr class="separator:ad4097378f6f2e7569c9c5a8cd7f72b30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9a4211065d3996fbb0018777672770b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#ae9a4211065d3996fbb0018777672770b">firstUpdated</a> (changedProperties)</td></tr>
<tr class="memdesc:ae9a4211065d3996fbb0018777672770b"><td class="mdescLeft">&#160;</td><td class="mdescRight">LitElement lifecycle hook. Called after the element's DOM has been updated the first time, immediately before <a class="el" href="class_app_shell.html#ad4097378f6f2e7569c9c5a8cd7f72b30" title="LitElement lifecycle hook. Called whenever the element&#39;s DOM has been updated and rendered.">updated()</a> is called.  <a href="#ae9a4211065d3996fbb0018777672770b">More...</a><br /></td></tr>
<tr class="separator:ae9a4211065d3996fbb0018777672770b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba1b8cb19ff2d56a5eacad0af072980"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a0ba1b8cb19ff2d56a5eacad0af072980">handleActivityCallback</a> (data)</td></tr>
<tr class="separator:a0ba1b8cb19ff2d56a5eacad0af072980"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c827163b7018777f88908b93c85b717"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a4c827163b7018777f88908b93c85b717">displayDialog</a> (dialogMetadata)</td></tr>
<tr class="memdesc:a4c827163b7018777f88908b93c85b717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update dialog metadata, and open a popup dialog immediately.  <a href="#a4c827163b7018777f88908b93c85b717">More...</a><br /></td></tr>
<tr class="separator:a4c827163b7018777f88908b93c85b717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c40b03cc18bd0f9457f2d00c9f3f88a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a3c40b03cc18bd0f9457f2d00c9f3f88a">populateAuthTokens</a> ()</td></tr>
<tr class="memdesc:a3c40b03cc18bd0f9457f2d00c9f3f88a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch a new OAuth token, valid for 1 hour.  <a href="#a3c40b03cc18bd0f9457f2d00c9f3f88a">More...</a><br /></td></tr>
<tr class="separator:a3c40b03cc18bd0f9457f2d00c9f3f88a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a967c8b0207203d0dfdfbb1bf35eeb6a7"><td class="memItemLeft" align="right" valign="top">async&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a967c8b0207203d0dfdfbb1bf35eeb6a7">fetchUserFields</a> ()</td></tr>
<tr class="memdesc:a967c8b0207203d0dfdfbb1bf35eeb6a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch and parse fields JSON from <code>fieldsUrl</code> (using user's OAuth <code>accessToken</code>).  <a href="#a967c8b0207203d0dfdfbb1bf35eeb6a7">More...</a><br /></td></tr>
<tr class="separator:a967c8b0207203d0dfdfbb1bf35eeb6a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b18846e9c17a0fa25f574e8a536cf88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a2b18846e9c17a0fa25f574e8a536cf88">loginFirebase</a> ()</td></tr>
<tr class="memdesc:a2b18846e9c17a0fa25f574e8a536cf88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use users OAuth <code>idToken</code> to login to Firebase directly.  <a href="#a2b18846e9c17a0fa25f574e8a536cf88">More...</a><br /></td></tr>
<tr class="separator:a2b18846e9c17a0fa25f574e8a536cf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2cc912d5b36e99426952c108e6629c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a3d2cc912d5b36e99426952c108e6629c">handleFirebaseAuthStateChange</a> (user)</td></tr>
<tr class="memdesc:a3d2cc912d5b36e99426952c108e6629c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update <code>currentUser</code> from Firebase <a class="el" href="struct_user.html" title="Flatbuffer which represents metadata from a user.">User</a> object.  <a href="#a3d2cc912d5b36e99426952c108e6629c">More...</a><br /></td></tr>
<tr class="separator:a3d2cc912d5b36e99426952c108e6629c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5399da2f4d8d4dd9aed4f7ccbb82cbb"><td class="memItemLeft" align="right" valign="top">async&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#af5399da2f4d8d4dd9aed4f7ccbb82cbb">handleAuthSignIn</a> ()</td></tr>
<tr class="memdesc:af5399da2f4d8d4dd9aed4f7ccbb82cbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle sign-in tasks.  <a href="#af5399da2f4d8d4dd9aed4f7ccbb82cbb">More...</a><br /></td></tr>
<tr class="separator:af5399da2f4d8d4dd9aed4f7ccbb82cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e4fa5553a9277d5f03faa0d1f3a61ea"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a5e4fa5553a9277d5f03faa0d1f3a61ea">handleAuthSignOut</a> ()</td></tr>
<tr class="memdesc:a5e4fa5553a9277d5f03faa0d1f3a61ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger Firebase sign-out.  <a href="#a5e4fa5553a9277d5f03faa0d1f3a61ea">More...</a><br /></td></tr>
<tr class="separator:a5e4fa5553a9277d5f03faa0d1f3a61ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a67624a920626248f90d82b62cf400990"><td class="memItemLeft" align="right" valign="top">static get&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_app_shell.html#a67624a920626248f90d82b62cf400990">properties</a> ()</td></tr>
<tr class="memdesc:a67624a920626248f90d82b62cf400990"><td class="mdescLeft">&#160;</td><td class="mdescRight">WebComponent properties that can be used as HTML attributes.  <a href="#a67624a920626248f90d82b62cf400990">More...</a><br /></td></tr>
<tr class="separator:a67624a920626248f90d82b62cf400990"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a97a545a8b86e18e025d2553fb5242748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a545a8b86e18e025d2553fb5242748">&#9670;&nbsp;</a></span>constructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::constructor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_app_shell_a97a545a8b86e18e025d2553fb5242748_cgraph.png" border="0" usemap="#class_app_shell_a97a545a8b86e18e025d2553fb5242748_cgraph" alt=""/></div>
<map name="class_app_shell_a97a545a8b86e18e025d2553fb5242748_cgraph" id="class_app_shell_a97a545a8b86e18e025d2553fb5242748_cgraph">
<area shape="rect"  title=" " alt="" coords="5,44,153,69"/>
<area shape="rect"  href="class_app_shell.html#a3d2cc912d5b36e99426952c108e6629c" title="Update currentUser from Firebase User object." alt="" coords="201,5,375,44"/>
<area shape="rect"  href="class_app_shell.html#a0ba1b8cb19ff2d56a5eacad0af072980" title=" " alt="" coords="206,68,371,107"/>
</map>
</div>

</div>
</div>
<a id="a4c827163b7018777f88908b93c85b717"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c827163b7018777f88908b93c85b717">&#9670;&nbsp;</a></span>displayDialog()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::displayDialog </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dialogMetadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update dialog metadata, and open a popup dialog immediately. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dialogMetadata</td><td>Use the following fields for the dialog: {title, helpText, errorText} </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a967c8b0207203d0dfdfbb1bf35eeb6a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a967c8b0207203d0dfdfbb1bf35eeb6a7">&#9670;&nbsp;</a></span>fetchUserFields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async AppShell::fetchUserFields </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch and parse fields JSON from <code>fieldsUrl</code> (using user's OAuth <code>accessToken</code>). </p>

</div>
</div>
<a id="ae9a4211065d3996fbb0018777672770b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9a4211065d3996fbb0018777672770b">&#9670;&nbsp;</a></span>firstUpdated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::firstUpdated </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>changedProperties</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>LitElement lifecycle hook. Called after the element's DOM has been updated the first time, immediately before <a class="el" href="class_app_shell.html#ad4097378f6f2e7569c9c5a8cd7f72b30" title="LitElement lifecycle hook. Called whenever the element&#39;s DOM has been updated and rendered.">updated()</a> is called. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">changedProperties</td><td>JS Map containing properties which have changed </td></tr>
  </table>
  </dd>
</dl>
<p>Setup event listeners:</p>
<ul>
<li>When <code>auth</code> element sends <code>currentUser</code> event, handle sign-in/sign-out</li>
<li>When <code>form</code> component sends <code>reset-form</code> event, clear the search bar</li>
<li>When <code>form</code> component sends <code>updated-user</code> event, merge new user details into the search bar</li>
<li>When <code>search</code> component sends <code>search</code> event:</li>
<li>If <code>item.type</code> is <code>"user"</code>:</li>
<li>Clear Firebase Database machine <a class="el" href="struct_activity.html" title="Flatbuffer which represents tag scan activity on a specific machine.">Activity</a> subscription, if currently running</li>
<li>Reset form values</li>
<li>Search for this user by row, and display the values</li>
<li>If <code>item.type</code> is <code>"machine"</code>:</li>
<li>Unsubscribe from previous Firebase Database path: <code>readers/{machineId}/latestUser</code></li>
<li>Subscribe to Firebase Database path: <code>readers/{machineId}/latestUser</code>, if <code>value</code> is updated: </li>
</ul>

</div>
</div>
<a id="a0ba1b8cb19ff2d56a5eacad0af072980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ba1b8cb19ff2d56a5eacad0af072980">&#9670;&nbsp;</a></span>handleActivityCallback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::handleActivityCallback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<ul>
<li>Clear form and update with Firebase values immediately</li>
<li>Fetch full user row to update all form fields </li>
</ul>

</div>
</div>
<a id="af5399da2f4d8d4dd9aed4f7ccbb82cbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5399da2f4d8d4dd9aed4f7ccbb82cbb">&#9670;&nbsp;</a></span>handleAuthSignIn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async AppShell::handleAuthSignIn </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle sign-in tasks. </p>
<ul>
<li>Fetch new OAuth token (valid for 1 hour)</li>
<li>Set a timer to renew OAuth token every 20 minutes</li>
<li>Fetch Google Spreadsheet <code>Users</code> fields JSON</li>
<li>Subscribe to Firebase Auth state changes to store logged-in user info </li>
</ul>

</div>
</div>
<a id="a5e4fa5553a9277d5f03faa0d1f3a61ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e4fa5553a9277d5f03faa0d1f3a61ea">&#9670;&nbsp;</a></span>handleAuthSignOut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::handleAuthSignOut </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Trigger Firebase sign-out. </p>

</div>
</div>
<a id="a3d2cc912d5b36e99426952c108e6629c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d2cc912d5b36e99426952c108e6629c">&#9670;&nbsp;</a></span>handleFirebaseAuthStateChange()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::handleFirebaseAuthStateChange </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>user</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update <code>currentUser</code> from Firebase <a class="el" href="struct_user.html" title="Flatbuffer which represents metadata from a user.">User</a> object. </p>

</div>
</div>
<a id="a2b18846e9c17a0fa25f574e8a536cf88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b18846e9c17a0fa25f574e8a536cf88">&#9670;&nbsp;</a></span>loginFirebase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::loginFirebase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Use users OAuth <code>idToken</code> to login to Firebase directly. </p>

</div>
</div>
<a id="a3c40b03cc18bd0f9457f2d00c9f3f88a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c40b03cc18bd0f9457f2d00c9f3f88a">&#9670;&nbsp;</a></span>populateAuthTokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::populateAuthTokens </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch a new OAuth token, valid for 1 hour. </p>
<ul>
<li>Extract the <code>accessToken</code> and <code>idToken</code>.</li>
<li>Use the <code>idToken</code> to trigger <a class="el" href="class_app_shell.html#a2b18846e9c17a0fa25f574e8a536cf88" title="Use users OAuth idToken to login to Firebase directly.">loginFirebase()</a>. </li>
</ul>

</div>
</div>
<a id="a67624a920626248f90d82b62cf400990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67624a920626248f90d82b62cf400990">&#9670;&nbsp;</a></span>properties()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static get AppShell::properties </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>WebComponent properties that can be used as HTML attributes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sheetId</td><td>Google Apps Sheet ID</td></tr>
    <tr><td class="paramname">machineId</td><td>Currently selected machine ID (e.g. Front Desk)</td></tr>
    <tr><td class="paramname">accessToken</td><td>OAuth access token (time-limited) for accessing Google Spreadsheets, Drive services on behalf of the logged-in user</td></tr>
    <tr><td class="paramname">idToken</td><td>OAuth OIDC ID token (time-limited) for accessing Firebase services on behalf of the logged-in user</td></tr>
    <tr><td class="paramname">oauthClientId</td><td>OAuth Application Client ID</td></tr>
    <tr><td class="paramname">oauthScopes</td><td>Space-separated list of OAuth scopes / permissions to be requested</td></tr>
    <tr><td class="paramname">fieldsUrl</td><td>URL for endpoint which returns Spreadsheet Columns as Fields JSON</td></tr>
    <tr><td class="paramname">nextMakerLabsIdUrl</td><td>URL for endpoint which returns next MakerLabs ID (ML___)</td></tr>
    <tr><td class="paramname">fields</td><td>Form fields JSON (obtained by querying Users Sheet Columns)</td></tr>
    <tr><td class="paramname">userName</td><td><a class="el" href="struct_user.html" title="Flatbuffer which represents metadata from a user.">User</a> name of currently selected user</td></tr>
    <tr><td class="paramname">usersSearchColumns</td><td>Comma-separated list of Users sheet column letters needed for search</td></tr>
    <tr><td class="paramname">defaultPhotoUrl</td><td>Default URL for placeholder image to use for Maker without a profile image</td></tr>
    <tr><td class="paramname">profilePhotosFolderId</td><td>Google Drive Folder ID to be used as the parent for uploaded images (defaults to "root")</td></tr>
    <tr><td class="paramname">query</td><td>Optional user name to load into form immediately upon loading page</td></tr>
    <tr><td class="paramname">emptyImageData</td><td>Default image data to display if no image data is provided (a blank PNG)</td></tr>
    <tr><td class="paramname">dialogMetadata</td><td>Optional object describing dialog popup which should be shown (if any) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6bb2a7738c4fc7e96651e4757c90d339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb2a7738c4fc7e96651e4757c90d339">&#9670;&nbsp;</a></span>render()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AppShell::render </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>LitElement lifecycle hook. Re-rendered after any update(). </p>
<dl class="section return"><dt>Returns</dt><dd>LitElement <code>html</code>`` literal, containing desired DOM state. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_app_shell_a6bb2a7738c4fc7e96651e4757c90d339_cgraph.png" border="0" usemap="#class_app_shell_a6bb2a7738c4fc7e96651e4757c90d339_cgraph" alt=""/></div>
<map name="class_app_shell_a6bb2a7738c4fc7e96651e4757c90d339_cgraph" id="class_app_shell_a6bb2a7738c4fc7e96651e4757c90d339_cgraph">
<area shape="rect"  title="LitElement lifecycle hook. Re&#45;rendered after any update()." alt="" coords="5,5,126,31"/>
<area shape="rect"  href="oauth-server_8js.html#a51af30a60f9f02777c6396b8247e356f" title=" " alt="" coords="174,5,224,31"/>
</map>
</div>

</div>
</div>
<a id="ad4097378f6f2e7569c9c5a8cd7f72b30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4097378f6f2e7569c9c5a8cd7f72b30">&#9670;&nbsp;</a></span>updated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async AppShell::updated </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>changedProperties</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>LitElement lifecycle hook. Called whenever the element's DOM has been updated and rendered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">changedProperties</td><td>JS Map containing properties which have changed </td></tr>
  </table>
  </dd>
</dl>
<p>If the <code>fields</code> property has changed and is non-empty:</p>
<ul>
<li>If initial search query was supplied (e.g. in the URL), fetch initial form data by <code>Name</code> or <code>MakerLabs ID</code></li>
<li>Query all machines, use as the top entries in the search bar</li>
<li>Query all users and add to the search bar </li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>webcomponents/src/<a class="el" href="app-shell_8js.html">app-shell.js</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_app_shell.html">AppShell</a></li>
  </ul>
</div>
</body>
</html>
